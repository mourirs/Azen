<!DOCTYPE html>
<html lang="en-US" class=" yes-js js_active js" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{assets/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{assets/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{assets/css/material-design-iconic-font.min.css}">
    <link rel="stylesheet" th:href="@{assets/css/owl.theme.default.css}">
    <link rel="stylesheet" th:href="@{assets/css/owl.carousel.css}">
    <link rel="stylesheet" th:href="@{assets/css/slick.css}">
    <link rel="stylesheet" th:href="@{assets/css/style.css}">
    <link rel="stylesheet" type="text/css" th:href="@{assets/css/settings.css}">
    <link rel="stylesheet" type="text/css" th:href="@{assets/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css}">
    <link rel="stylesheet" th:href="@{assets/css/element.css}">
    <link rel="icon" th:href="@{images/favicon.png}" type="image/png">
    <title>Shopping</title>
</head>

<body class="woocommerce woocommerce-page">
<!--quick view product-->

<!--end quick view product-->
<div class=" wrapper-container boxed-area">
    <!--header-->
    <div class="container container-box-header1">
        <header id="masthead" class="site-header">
            <div class="header-hp-1 style-header-hp-1 affix">
                <div id="js-navbar-fixed" class="menu-desktop">
                    <div class="menu-desktop-inner">
                        <!-- Logo -->
                        <div class="menu-mobile-effect hamburger hamburger--spin">
                            <div class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </div>
                        </div>
                        <div class="logo">
                            <a href="index.html" title="azen" rel="home">
                                <img src="images/Logo.png" alt="azen.physcode.com">
                            </a>
                        </div>
                        <div class="space-header"></div>
                        <!-- Main Menu -->
                        <nav class="main-menu">
                            <ul class="navmenu">
                                <li class="menu-item menu-item-has-children">
                                    <a th:href="@{/index}">Home</a>
                                </li>
                                <li class="menu-item menu-item-has-children">
                                    <a th:href="@{/login}">Account</a>
                                    <ul class="sub-menu">
                                        <li class="menu-item">
                                            <a th:href="@{/login}">Login/Register</a>
                                        </li>
                                        <li class="menu-item">
                                            <a th:href="@{/information}">Information</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="menu-item menu-item-has-children">
                                    <a th:href="@{/shop}" class="active">Shop</a>
                                    <ul class="sub-menu">
                                        <li class="menu-item">
                                            <a th:href="@{/shop}">Shopping</a>
                                        </li>
                                        <li class="menu-item">
                                            <a th:href="@{/wishlist}">Wishlist</a>
                                        </li>
                                        <li class="menu-item">
                                            <a th:href="@{/cart}">Cart</a>
                                        </li>
                                        <li class="menu-item">
                                            <a th:href="@{/orderIF}">Order</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="menu-item">
                                    <a th:href="@{/contact}">Contact</a>
                                </li>
                            </ul>
                        </nav>
                        <!-- Header Right -->
                        <div class="header-right">
                            <div class="header-wishlist">
                                <a th:href="@{/wishlist}"><i class="fa fa-heart"></i></a>
                            </div>
                            <div class="woocommerce widget_shopping_cart">
                                <div class="minicart_hover" id="header-mini-cart">
                                    <a class="cart-items-number" th:href="@{/cart}"><i class="icon-bag"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <!--end header-->

    <div class="site page-content">
        <div class="breadcrumb-contact-us breadcrumb-section section-box">
            <div class="container breadcrumb-inner">
                <h1 class="heading_primary">Shopping</h1>
                <div class="breadcrumbs-wrapper">
                    <ul class="phys-breadcrumb">
                        <li><a href="index.html" class="home">Home</a></li>
                        <li>Shopping</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="content-area" id="app">
            <div class="container">
                <div class="row">
                    <div class="site-main">
                        <sp></sp>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- #content -->
</div>

<!--footer-->
<div id="wrapper-footer" class="wrapper-footer">
    <div class="container">
        <div class="row">
            <aside class="col-md-4">
                <div class="textwidget"><p><a href="#"><img
                        class="alignnone size-full wp-image-100"
                        src="images/Logo-white.png" alt=""></a></p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                        ut
                        labore et dolore magna aliqua.</p>
                    <div class="socials"><a href="javascript:void(0)">FACEBOOK</a>&nbsp;&nbsp; <a
                            href="javascript:void(0)">TWITTER</a>&nbsp;&nbsp; <a
                            href="javascript:void(0)">INSTAGRAM</a></div>
                </div>
            </aside>
            <aside class="col-md-4 text-footer">
                <h3 class="widget-title">INFO</h3>
                <div class="textwidget">
                    <ul>
                        <li><i class="zmdi zmdi-home"></i> 999 xxxxx xxxxx , xxxxx , xxxxx
                        </li>
                        <li><i class="zmdi zmdi-phone"></i> +9-999-999-999
                        </li>
                        <li><i class="zmdi zmdi-email"></i> Azenfashion@999.com
                        </li>
                        <li><i class="zmdi zmdi-time"></i> Monday - Saturday: 8:00 am - 18:00 pm
                            <p class="footer-sunday">
                                &nbsp;&nbsp;&nbsp;Sunday : Closed
                            </p>
                        </li>
                    </ul>
                </div>
            </aside>
            <aside class="col-md-4 text-footer">
                <h3 class="widget-title">INSTAGRAM</h3>
                <div class="textwidget">
                    <div id="sb_instagram" class="sbi sbi_col_4  sbi_width_resp sbi_small">
                        <a href="javascript:void(0)"><img src="images/instagram/picter1.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter2.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter3.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter4.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter5.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter6.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter7.png" alt=""></a>
                        <a href="javascript:void(0)"><img src="images/instagram/picter8.jpg" alt=""></a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>
<!--end footer-->
<span class="footer__arrow-top" style="bottom: 30px;">TOP</span>
<script th:src="@{assets/js/jquery-3.4.1.min.js}"></script>
<script th:src="@{assets/js/bootstrap.min.js}"></script>
<script th:src="@{assets/js/flexslider.js}"></script>
<script th:src="@{assets/js/slick.min.js}"></script>
<script th:src="@{assets/js/owl.carousel.js}"></script>
<script th:src="@{assets/js/jquery.themepunch.tools.min.js}"></script>
<script th:src="@{assets/js/jquery.themepunch.revolution.min.js}"></script>
<script th:src="@{assets/js/theme.js}"></script>
<script th:src="@{assets/js/vue.js}"></script>
<script th:src="@{assets/js/element.js}"></script>
<script th:src="@{assets/js/axios.js}"></script>
<script th:src="@{assets/js/dataParse.js}"></script>
<template id="sp">
    <div class="container">
        <div class="wrapper-result-count">
            <p class="woocommerce-result-count">
                Show all the products</p>
            <form class="woocommerce-ordering">
                <el-select v-model="value" placeholder="请选择" @change="qxlb()">
                    <el-option
                            v-for="(item,index) in options"
                            :key="index"
                            :label="item.cyType"
                            :value="item.cyId">
                    </el-option>
                </el-select>
            </form>
        </div>
        <div class="wc-sc-product woocommerce featured-layout-1">
            <div class="inner-sc-product">
                <ul class="products columns-4">
                    <li class="product" v-for="(item,index) in products" v-if="products.length > 0">
                        <div class="inner-item-product">
                            <div class="product-image">
                                <img :src="item.coImage" alt="">
                                <div class="box-hover">
                                    <a href="javascript:void(0)" class="quick-view"
                                       data-toggle="modal"
                                       data-target="#quickview"
                                       @click="quickviewsp(index)"
                                    >
                                    </a>
                                    <div class="yith-wcwl-add-to-wishlist">
                                        <a href="javascript:void(0)"
                                           class="add_to_wishlist single_add_to_wishlist"
                                           @click="addAspiration(index)">
                                        </a>
                                    </div>
                                    <a href="javascript:void(0)" data-quantity="1"
                                       class="button product_type_simple add_to_cart_button ajax_add_to_cart"
                                       @click="addCarByOne(index)"
                                    ></a>
                                </div>
                            </div>
                            <div class="wrapper-content-item"><h2
                                    class="woocommerce-loop-product_title">
                                {{item.coName}}</h2>
                                <span class="price"><span
                                        class="woocommerce-Price-amount amount"><span
                                        class="woocommerce-Price-currencySymbol"></span>{{item.coPrice | showPrice}}</span></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <el-pagination
                    layout="prev, pager, next"
                    :total="total"
                    :current-page="currentPage"
                    :page-size="pageSize"
                    @size-change="handleSizeChange"
                    @current-change="handleCurrentChange"
                    v-if="total >= 13"
                    style="float: left">
            </el-pagination>
        </div>
        <div class="modal fade" id="quickview" tabindex="-1" role="dialog" aria-labelledby="quickview"
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                    <div class="product-lightbox">
                        <div class="woocommerce">
                            <div class="product shop-single-v1-section">
                                <div class="images images_quick_view">
                                    <img :src="quickview.coImage"
                                         class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail"
                                         alt="">
                                </div>
                                <div class="summary summary_quick_view">
                                    <h1 class="product_title entry-title">{{quickview.coName}}</h1>
                                    <span class="rating">
                            </span>
                                    <span class="price">
                                <ins>{{ parseInt(quickview.coPrice) | showPrice}}</ins>
                            </span>
                                    <div class="woocommerce-product-details__short-description">
                                    </div>

                                    <div>
                                        <div class="btn-group">
                                            <el-input-number v-model="num" :min="1" label="选购数量"></el-input-number>
                                        </div>
                                        <div class="btn-add-to-cart" style="padding-top: 10px">
                                            <button class="btn add-to-cart" @click="addCar()">ADD TO CART</button>
                                        </div>
                                    </div>
                                    <div class="yith-wcwl-add-button" @click="addAspirationByView()">
                                        <i class="fa fa-heart"></i> <span>Add to Wishlist</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button title="Close (Esc)" type="button" class="mfp-close" data-dismiss="modal">×</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
    const sp = {
        template: "#sp",
        data() {
            return {
                products: [],
                currentPage: 1,// 当前页码
                pageSize: 10,// 每页大小
                total: 1,
                quickview: {},
                options: [],
                value: '',
                num: 1,
            };
        },
        methods: {
            commodityListInFo(pageNumber) {
                axios({
                    method: "post",
                    url: "/commodityListInFo",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        pageNumber: pageNumber,
                    }
                }).then((response) => {
                    this.products = response.data.list;
                    this.currentPage = response.data.pageNum;
                    this.pageSize = response.data.pageSize;
                    this.total = response.data.total;
                })
            },
            handleSizeChange(val) {
                this.commodityListInFo(val);
            },
            handleCurrentChange(val) {
                this.commodityListInFo(val);
            },
            quickviewsp(index) {
                this.quickview = this.products[index];
            },
            commodityCategoryList() {
                axios.post("/commodityCategoryList").then((response) => {
                    this.options = response.data;
                })
            },
            qxlb() {
                if (this.value) {
                    this.commodityListInFoById(1, this.value);
                } else {
                    this.commodityListInFo(1);
                }
            },
            commodityListInFoById(pageNumber, id) {
                axios({
                    method: "post",
                    url: "/commodityListInFo",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        pageNumber: pageNumber,
                        id: id
                    }
                }).then((response) => {
                    this.products = response.data.list;
                    this.currentPage = response.data.pageNum;
                    this.pageSize = response.data.pageSize;
                    this.total = response.data.total;
                })
            },
            addCar() {
                axios({
                    method: "post",
                    url: "/addCar",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        cNum: this.num,
                        coId: this.quickview.coId
                    }
                }).then((response) => {
                    if (response.data) {
                        this.$notify({
                            title: '添加成功',
                            message: '宝贝正在购物车等你！',
                            position: 'bottom-right'
                        });
                    } else {
                        this.$notify.error({
                            title: '添加失败',
                            message: '宝贝添加失败，请稍后重试！',
                            position: 'bottom-right'
                        });
                    }
                })
            },
            addCarByOne(index) {
                axios({
                    method: "post",
                    url: "/addCar",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        cNum: 1,
                        coId: this.products[index].coId
                    }
                }).then((response) => {
                    if (response.data) {
                        this.$notify({
                            title: '添加成功',
                            message: '宝贝正在购物车等你！',
                            position: 'bottom-right'
                        });
                    } else {
                        this.$notify.error({
                            title: '添加失败',
                            message: '宝贝添加失败，请稍后重试！',
                            position: 'bottom-right'
                        });
                    }
                })
            },
            addAspirationByView(){
                axios({
                    method: "post",
                    url: "/addAspiration",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        coId: this.quickview.coId
                    }
                }).then((response) => {
                    if (response.data) {
                        this.$notify({
                            title: '添加成功',
                            message: '已经添加为心动物品！',
                            position: 'bottom-right'
                        });
                    } else {
                        this.$notify.error({
                            title: '添加失败',
                            message: '宝贝添加失败，请稍后重试！',
                            position: 'bottom-right'
                        });
                    }
                })
            },
            addAspiration(index) {
                axios({
                    method: "post",
                    url: "/addAspiration",
                    transformRequest: [
                        function (data) {
                            return parseParams(data);
                        }
                    ],
                    data: {
                        coId: this.products[index].coId
                    }
                }).then((response) => {
                    if (response.data) {
                        this.$notify({
                            title: '添加成功',
                            message: '已经添加为心动物品！',
                            position: 'bottom-right'
                        });
                    } else {
                        this.$notify.error({
                            title: '添加失败',
                            message: '宝贝添加失败，请稍后重试！',
                            position: 'bottom-right'
                        });
                    }
                })
            }
        },
        mounted() {
            this.commodityListInFo(1);
            this.commodityCategoryList();
        },
        filters: {
            showPrice(price) {
                return "￥" + price.toFixed(2)
            }
        },
    };

    const app = new Vue({
        el: "#app",
        components: {sp},
    })
</script>
</body>
</html>